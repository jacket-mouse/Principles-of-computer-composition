
# 0x01 RAM

## 动态RAM（DRAM）

- 常见简答题
**为什么要刷新？简要说明动态RAM刷新的几种方式及其特点。**
- 原因有两点：
	- 主要原因：由于**电容极板漏抗**的存在，存储于电容中的电荷存在泄漏的情况，这会导致动态RAM存储单元中的原存信息丢失。
	- 此外，最常用的**单管动态RAM**的读出为**破坏性读出**。
	- 综合上述两点，动态RAM必须要进行刷新。
- 动态RAM的刷新方式有**集中式刷新、分散式刷新、异步式刷新**和透明式刷新等四种方式。（只答前三种也可）
	各种刷新方式的特点如下：
	- 集中式刷新：在最大刷新间隔时间内，集中安排一段时间进行刷新。其缺点是进行刷新时必须停止读、写操作。这对主机而言是个“死区” 
	- 分散式刷新：刷新工作安排在系统的存取周期内进行，对主机而言不再有“死区”。但该方式加长了系统的存取周期，存在无谓刷新，降低了整机运行效率。因此，分散方式刷新不适用于高速存储器。 
	- 异步式刷新：结合了上述两种方式的优点，充分利用了最大刷新间隔。相对于分散式刷新而言，它减少了刷新次数；相对于集中方式来说，主机的“死区”又缩短很多。因此，这种方式使用得比较多。
	- 透明式刷新：该方式不占用CPU时间，对CPU而言是透明的操作；但控制线路复杂。

###  基本单元电路

- 经验教训：
	- 考试题 -> 注意单管动态RAM的读写操作的描述，尤其是写入0时。
- 半导体三极管（MOS管）
	- 只要栅极电压>源级电压，那么漏极电压=源极电压（与栅极无关），或者说三极管是导通的。

![](https://1ees0n.oss-cn-qingdao.aliyuncs.com/Computer-organization/202402131046144.png)

- **基本说明**
	- 信息保存在Cg、Cs上
	- 控制管：T1、T2、T3（三管）
			读选择线有效->T2导通
			写选择线有效->T3导通
	- 控制管：T（单管）

![](https://1ees0n.oss-cn-qingdao.aliyuncs.com/Computer-organization/202402131045614.png)
- 
- **三管动态RAM特点**
	- 读出与原存信息相反->读数据的输出端要加非门。
		- 读出操作（三管）：
			- 预充电信号使得T4导通->Tdd给读数据线充电变为高电平（1）
			- 同时，读选择线也是有效的（1），T2被导通，如果Cg里的数据是0，那么T1不会导通，读数据线保持1，读出为1；
			- 相反，如果Cg里的数据为1，T1会导通，数据线就直接与地线相通，变成0，读出0。
	
	- 写入与输入信息相同
		- 写入操作（三管）：
			- 写选择线有效（1）T3导通，使得写数据线与Cg相连，输入与写入相同。
- 单管读写操作
	- 读出操作（单管）：
		- 字线有效（1），T导通，Cs放电（1），数据线有电流（1）；Cs不放电，数据线无电流（0）。
	- 写入操作（单管）：
		- 同读出操作，写入1->Cs充电；写入0->Cs放电。
### 实际芯片

#### 单管动态 RAM 4116 (16K × 1位) 外特性

- RAS# = Row Adress Selects
- CAS# = Column Adress Selects

![](https://1ees0n.oss-cn-qingdao.aliyuncs.com/Computer-organization/202402131048596.png)

需要14位地址线，但只有7根地址线，所以分两次传入，一次传7位行地址，下一次传7位列地址。
## 静态RAM（SRAM）

## 总结

**试比较静态RAM和动态RAM各自的特点。**

**参考答案要点：**

1）静态RAM：
- 依靠**双稳态触发器**保存二进制代码（原理）
- 只要不断电，信息就不会丢失（特点）
- 功耗较大，集成度较低，速度快，每位价格高（特点）
- 适合于作Cache或存取速度要求较高的小容量主存（用途）

2）动态RAM：
 - 依靠**电容存储电荷**来保存二进制代码（原理）
 - 需刷新电路进行动态刷新（特点）
 - 存取速度较慢；功耗小，集成度高，每位价格低（特点）
 - 适合于作大容量主存（应用）

# 0x02 ROM(不考)

# 0x03 主存的技术指标
## 存储容量

主存存放二进制代码的总位数。

## 存储速度

- 存取时间：存储器访问的时间
	- 读入时间
	- 写入时间（从本次读/写开始至本次读/写结束）
- 存取周期：连续两次独立的存储器操作（读或写）所需的最小时间间隔
## 存储器的带宽

**单位时间内存存取的信息量**

**若存储器的数据总线宽度为32位，存取周期为200ns，则存储器的带宽是多少？**
- 存储器的带宽指单位时间内存储器存取的信息量。
-  存储器带宽 = 1 / 200ns * 32位 = 160M位 / s = 20 MB / s（1M = $10^6$）


# 0x04 存储器的拓展

- 经验教训：
	- 在考试之前没有过多看这部分，导致考试时差点忘记怎么画图了。所以无论多么熟的知识点都要过一遍，有时候自己忘记了细节（数据线、R/W#都是要接到CPU上的，而且要表明D0~D9，考试时忘了标）而自己都不知道。
	- 考试时，自己忘了带尺子。
- 习题练习
	**设CPU有18根地址线(A17---A0)，8根数据线(D—D0)，用MREQ#做访存控制信号（低电平有效），R/W#作读写控制信号（高电平为读，低电平为写）。现有下列芯片： 4K×8位RAM； 2K×8位ROM及3-8译码器和各种门电路。主存地址空间为： 28800H开始为2K ROM，2E000H开始为8K RAM。**
	**要求：补充完成CPU与存储器连线图。**
	
	![](https://1ees0n.oss-cn-qingdao.aliyuncs.com/Computer-organization/202402131048957.png)
	
	可以看到，138译码器用到了三个输出，因为2个4k RAM的管脚都被占满了，想要区分开来，只能通过138译码器来进行，刚好高三位的地址他们有一位不同。

> 2k ROM
> 10 1000 1000 0000 0000
> 10 1000 1111 1111 1111
> 8k RAM
> 10 1110 0000 0000 0000
> 10 1111 1111 1111 1111
>


**设CPU有16根地址线，8根数据线，用MREQ#（低电平有效）作访存控制信号，R/W#作读写控制信号（高电平为读，低电平为写），现有1K×4位、4K×8位的RAM芯片，2K×8位，4K×4位的ROM芯片，以及74l38译码器和各种门电路，画出CPU与存储器连接图，图中标明信号线的方向、种类和条数；并写出每片RAM芯片的地址范围（用十六进制描述）。**

**要求：主存地址空间分配：A000H---A7FFH为系统程序区； A800H---AFFFH为用户程序区。**

![](https://1ees0n.oss-cn-qingdao.aliyuncs.com/Computer-organization/202402131048020.png)

RAM芯片的地址范围（平时做题时做好也能写出来，不过不是十六进制，而是二进制的形式，**因为两个芯片之间也有不同**）：
1. RAM1和RAM2：A800H-ABFFH  
2. RAM3和RAM4： AC00H-AFFFH
3. **注意画CS#管脚**

# 0x05 提高访存速度措施

## 采用高速器件

## 采用层次结构Cache-主存

## 调整主存结构

### 单体多字系统

### 多体并行系统

一个存储器分成多个存储体，各个体并行工作，不同的请求源同时访问不同的体。
#### 高位交叉（顺序编址）

![](https://1ees0n.oss-cn-qingdao.aliyuncs.com/Computer-organization/202402131048578.png)

![](https://1ees0n.oss-cn-qingdao.aliyuncs.com/Computer-organization/202402131048807.png)

顺序编址：相当于整数被分为负整数和正整数两部分，它们的内部是连续的，两部分相连也是连续的。

#### 低位交叉

![](https://1ees0n.oss-cn-qingdao.aliyuncs.com/Computer-organization/202402131048655.png)

 各个体轮流编址（模4编址）

![](https://1ees0n.oss-cn-qingdao.aliyuncs.com/Computer-organization/202402131048731.png)

模4编址：存储体内部不连续，存储体和存储体之间也不连续。

**特点**
在不改变存取周期的前提下，增加存储器的带宽

![](https://1ees0n.oss-cn-qingdao.aliyuncs.com/Computer-organization/202402131048882.png)

设四体低位交叉存储器，存取周期为T，总线传输周期为τ，为实现流水线方式存取，应满足 T ＝ 4τ。

![](https://1ees0n.oss-cn-qingdao.aliyuncs.com/Computer-organization/202402131048956.png)

连续读取 4 个字所需的时间为   T＋(4 －1)τ

  **一个4体低位交叉的存储器，假设存取周期为T，CPU每隔1/4存取周期启动一个存储体，试问依次访问64个字需多少个存取周期？** 

**答案要点：**

需要的存储周期数：T+(64-1)T/4=16.75T 
存取周期数取整，为17个。
#### 存储器控制部件（控存）

### 高性能存储芯片

